import{j as g,r as Rn}from"./index-7s7xaQU8.js";import{r as e}from"./index-CC6F48bw.js";import{C as En,p as ln,a0 as an,a1 as Ce,a2 as vt,g as Ke,a3 as On,a4 as oe,a5 as ae,Z as Pn,u as zt,s as Hn,a6 as $n,a7 as Bn,k as tt,G as cn,a8 as un,a9 as fn,V as qn,aa as zn,ab as Un,ac as Wn,ad as Et,ae as _n,af as Kn,ag as Jn,ah as Qn}from"./month-view-CkqGJnIt.js";var ft;(function(s){s.Circular="Circular",s.Cupertino="Cupertino",s.SingleCircle="SingleCircle",s.DoubleCircle="DoubleCircle"})(ft||(ft={}));const Ut=e.forwardRef((s,c)=>{const{className:n,label:t="",visible:i=!0,thickness:o="3px",animationDuration:r="1s",color:C=En.Primary,size:m="36px",overlay:M=!1,type:k=ft.Circular,children:h,...x}=s,_=e.useRef(null);e.useEffect(()=>{ln("spinner")},[]);const S=36,E=e.useMemo(()=>({label:t,visible:i,thickness:o,animationDuration:r,color:C,size:m,overlay:M,type:k}),[t,i,o,r,C,m,M,k]);e.useImperativeHandle(c,()=>({...E,element:_.current}),[E]);const z=({thickness:b,duration:A})=>e.useMemo(()=>{const J=(S-b)/2,B=2*Math.PI*J;return g.jsx("svg",{viewBox:`0 0 ${S} ${S}`,children:g.jsx("circle",{cx:S/2,cy:S/2,r:(S-b)/2,strokeWidth:b,strokeDasharray:B,strokeDashoffset:B*.25,strokeLinecap:"round",fill:"none",className:"sf-spinner-circle-inner",style:{animation:`spinner-rotate ${A} linear infinite`}})})},[b,A,S]),U=({duration:b,thickness:A})=>{const P=e.useMemo(()=>{const B=S/2-S*.1,ie=A,re=S*.15,Fe=360/12;return Array.from({length:12},(Te,we)=>{const H=Fe*we,G=(we+1)/12;return g.jsx("line",{x1:S/2,y1:S/2-B,x2:S/2,y2:S/2-B+re,className:"sf-spinner-cupertino-dots-inner",strokeWidth:ie,strokeLinecap:"round",opacity:G,transform:`rotate(${H} ${S/2} ${S/2})`},we)})},[A]);return g.jsx("svg",{viewBox:`0 0 ${S} ${S}`,className:"sf-spinner-cupertino-dots",style:{animation:`spinner-rotate ${b} linear infinite`},children:P})},$=({thickness:b,duration:A})=>{const{outerCircleRadius:P,innerCircleRadius:J,outerDashLength:B,innerDashLength:ie}=e.useMemo(()=>{const re=(S-b)/2,Fe=(S-b*5)/2,Te=2*Math.PI*re,we=2*Math.PI*Fe,H=4,G=Te/(H*2),ue=we/(H*2);return{outerCircleRadius:re,innerCircleRadius:Fe,outerDashLength:G,innerDashLength:ue}},[b,S]);return g.jsxs(g.Fragment,{children:[g.jsx("svg",{viewBox:`0 0 ${S} ${S}`,className:"sf-spinner-doublecircle-inner",children:g.jsx("circle",{cx:S/2,cy:S/2,r:P,strokeWidth:b,fill:"none",strokeDasharray:`${B} ${B}`,strokeLinecap:"round",style:{animation:`spinner-dash ${A} linear infinite`}})}),g.jsx("svg",{viewBox:`0 0 ${S} ${S}`,className:"sf-spinner-doublecircle-second-inner",children:g.jsx("circle",{cx:S/2,cy:S/2,r:J,strokeWidth:Math.max(1,b-1),fill:"none",strokeDasharray:`${ie} ${ie}`,strokeLinecap:"round",style:{animation:`spinner-dash ${A} linear infinite`}})})]})},K=({thickness:b,duration:A})=>e.useMemo(()=>{const J=(S-b)/2,re=2*Math.PI*J/(8*2);return g.jsx("svg",{viewBox:`0 0 ${S} ${S}`,children:g.jsx("circle",{cx:S/2,cy:S/2,r:J,strokeWidth:b,fill:"none",className:"sf-spinner-singlecircle-inner",strokeDasharray:`${re} ${re}`,strokeLinecap:"round",style:{animation:`spinner-rotate ${A} linear infinite`}})})},[b,A]),R=b=>{if(typeof b!="string")return"1s";const A=["ms","s"];for(const P of A)if(b.endsWith(P)){const J=b.slice(0,-P.length),B=parseFloat(J);if(!isNaN(B))return`${B}${P}`}return"1s"},y=C,l=Math.max(1,parseFloat(o)||3),a=e.useMemo(()=>R(r),[r]),p=e.useMemo(()=>{if(h!=null)return h;switch(k){case ft.Cupertino:return g.jsx(U,{thickness:l,duration:a});case ft.DoubleCircle:return g.jsx($,{thickness:l,duration:a});case ft.SingleCircle:return g.jsx(K,{thickness:l,duration:a});case ft.Circular:default:return g.jsx(z,{thickness:l,duration:a})}},[h,k,y,l,a]),d=an(m),D=e.useMemo(()=>({width:d,height:d}),[d]),F=e.useMemo(()=>`sf-spinner${M?" sf-spinner-overlay":""} sf-control${n?" "+n:""} sf-spinner-${String(C).toLowerCase()}`,[M,n,C]),T=e.useMemo(()=>k===ft.DoubleCircle&&!h?"sf-spinner-doublecircle":"",[k,h]);return i?g.jsx("div",{ref:_,className:F,"aria-live":"polite",role:"status",...x,children:g.jsxs("div",{className:"sf-content-center sf-spinner-content ",children:[g.jsx("span",{className:T,style:D,children:p}),t?g.jsx("div",{className:"sf-spinner-label",children:t}):null]})}):null});Ut.displayName="Spinner";var qt;(function(s){s.Left="Left",s.Right="Right"})(qt||(qt={}));function Yn(s,c,n=vt.None){const t=[],i=On({},Wt,c);if(i.groupBy){let o=new Ce().group(String(i.groupBy));o=dn(n,"key",o),gn(s,o).forEach(C=>{const m={};m[String(i.text)]=C.key,m.isHeader=!0;let M=String(i.text);M==="id"&&(M="text",Object.assign(m,{text:C.key})),m[String(i.id)]=`group-list-item-${C.key?C.key.toString().trim():"undefined"}`,m.items=C.items,t.push(m),t.push(...C.items)})}return t}function dn(s,c,n=new Ce){const t=n instanceof Ce?n:new Ce;return s==="Ascending"?t.sortBy(c,"ascending",!0):s==="Descending"?t.sortBy(c,"descending",!0):t.queries&&(t.queries=t.queries.filter(i=>i.fn!=="onSortBy")),t}function gn(s,c){return!s||!c?[]:new Ke(s).executeLocal(c)}function Gn(s,c){const n={};if(oe(s))return s;if(typeof s=="string"||typeof s=="number"||typeof s=="boolean"){const t=s.toString();return n[c.text||"text"]=t,n[c.id||"id"]=s,n}else if(oe(s.isHeader)){for(const t of Object.keys(c))if(Object.prototype.hasOwnProperty.call(c,t)){const i=c[t],o=!oe(i)&&typeof i=="string"?ae(i,s):void 0;!oe(o)&&typeof i=="string"&&i.trim()&&(n[String(i)]=o)}if(!c.text&&c.id&&!oe(ae(c.id,s))){const t=c.id,i=ae(t,s);n.text=i}}else return s;return n}const Xn=s=>{if(!s)return 40;const c=s.querySelector(".sf-list-item"),n=c?c.offsetHeight:0;return typeof n=="number"&&n>0?n:40},Zn=(s,c)=>c?c.querySelector(`.sf-list-item[data-index="${s}"]`):null,Nt=(s,c)=>{!c||oe(s)||requestAnimationFrame(()=>{var t;const n=Zn(s,c);if(n)(t=n==null?void 0:n.scrollIntoView)==null||t.call(n,{block:"nearest",inline:"nearest"});else{const i=Xn(c);c.scrollTop=s*i}})},rn=(s,c,n)=>Math.max(c,Math.min(n,s)),Ot=(s,c,n,t,i)=>{const o=Math.floor(c/Math.max(1,n)),r=rn(o-i,0,Math.max(0,s)),C=rn(r+t+i*2,0,s),m=r*n,M=Math.max(0,s*n);return{startIndex:r,endIndex:C,offsetY:m,totalHeight:M}},er=s=>s&&s.classList.contains("sf-list-item")&&!s.classList.contains("sf-list-group-item")&&!s.classList.contains("sf-disabled")&&!s.classList.contains("sf-display-none"),tr="sf-list-group-item",nr="sf-list-item",rr="sf-level",sr="sf-has-child",or="sf-disabled",lr="sf-navigable",ar=(s,c,n,t,i,o,r,C,m,M,k)=>{const h=e.useMemo(()=>({...Wt,...c}),[c]),x=e.useMemo(()=>Gn(s,h),[s,h]),_=e.useMemo(()=>{const d=x[String(h.id)];return d!=null&&String(d)!==""?String(d):Pn("listitem")},[x,h.id]),S=e.useMemo(()=>!!(Object.prototype.hasOwnProperty.call(s,"isHeader")&&x.isHeader),[s]),E=e.useMemo(()=>(x[String(h.child)]||[]).length>0,[x,h.child]),z=e.useMemo(()=>k||!!(x[String(h.checked)]&&x[String(h.checked)].toString()==="true"),[x,h.checked,k]),U=e.useMemo(()=>x[String(h.text)]||(h.id&&x[String(h.id)]?x[String(h.id)].toString():""),[h.text,h.id,x]),$=e.useMemo(()=>String(h.icon)in x&&!oe(x[String(h.icon)]),[x,h.icon]),K=e.useMemo(()=>!!x[String(h.imageUrl)],[x,h.imageUrl]),R=e.useMemo(()=>!!x[String(h.url)],[x,h.url]),y=e.useMemo(()=>!S&&i?typeof i=="function"?i(s):i:S&&o?typeof o=="function"?o(s):o:null,[S,o,i,s]),l=e.useMemo(()=>[S?tr:nr,S&&n===0?"sf-list-group-first-item":"",`${rr}-${(r==null?void 0:r.level)??1}`,x&&!oe(x[String(h.disabled)])&&x[String(h.disabled)].toString()==="true"?or:"",E?sr:"",C?"sf-checklist":"",(m?M??"":n===t?C?"sf-focused":"sf-active":"")||"",x&&x[String(h.url)]?lr:"",x&&!oe(x[String(h.visible)])&&x[String(h.visible)].toString()==="false"?"sf-display-none":"",x&&C&&z?"sf-active":""].filter(Boolean).join(" ").trim(),[S,r==null?void 0:r.level,x,h.disabled,E,C,m,M,n,t,k]),a=e.useMemo(()=>{const d={className:l,role:(r==null?void 0:r.groupItemRole)!==""&&(r==null?void 0:r.itemRole)!==""?S?r==null?void 0:r.groupItemRole:r==null?void 0:r.itemRole:void 0,"aria-level":(r==null?void 0:r.groupItemRole)==="presentation"||(r==null?void 0:r.itemRole)==="presentation"||r==null?void 0:r.level};return oe(x)||oe(x[String(h.tooltip)])||(d.title=String(x[String(h.tooltip)])),d},[l,r,S,h,n,x]),p=e.useMemo(()=>{if(!x||!Object.prototype.hasOwnProperty.call(x,String(h.htmlAttributes))||!x[String(h.htmlAttributes)])return a;let d={...a};const D=x[String(h.htmlAttributes)],{className:F,style:T,...b}=D;return F&&(d.className=`${d.className||""} ${F}`.trim()),T&&(d.style={...d.style,...T}),d={...d,...b},d},[a,x,h.htmlAttributes]);return{mergedFields:h,fieldData:x,uid:_,grpLI:S,checked:z,liProps:p,displayText:U,hasChild:E,hasIcon:$,hasImage:K,hasUrl:R,templateContent:y,ariaAttributes:r}},ir="sf-list-icon",sn="sf-list-text",cr="sf-list-url",ur="sf-list-img",fr="sf-anchor-wrap",dr=e.memo(({item:s,fields:c,index:n,focusedIndex:t,parentClass:i,itemTemplate:o,groupTemplate:r,ariaAttributes:C,checkBox:m,checkBoxPosition:M,isChecked:k,as:h,onItemClick:x,onItemKeyDown:_,getItemProps:S,...E})=>{if(oe(s))return null;const{ripple:z}=zt(),{rippleMouseDown:U,Ripple:$}=Hn(z),{className:K,...R}=e.useMemo(()=>(S==null?void 0:S({item:s,index:n}))||{},[S,s,n]),y=ar(s,c,n,t,o,r,C,m,i,K,k),l=h??"li",a=e.useCallback(A=>{x==null||x(A,n)},[x,n]),p=e.useCallback(A=>{_==null||_(A,n)},[_,n]),d={...y.liProps,...E,...R,onClick:a,onKeyDown:p,onMouseDown:U},D=()=>g.jsx("span",{className:sn,children:y.displayText}),F=()=>g.jsx($n,{className:"sf-font-size-lg"}),T=({position:A})=>g.jsx(Bn,{className:`sf-listview-checkbox sf-checkbox-${A.toLowerCase()}`,checked:y.checked}),b=()=>g.jsxs(g.Fragment,{children:[y.hasIcon&&g.jsx("div",{className:ir,children:y.fieldData[String(y.mergedFields.icon)]}),y.hasImage&&g.jsx("img",{className:ur,src:String(y.fieldData[String(y.mergedFields.imageUrl)]),alt:"Icon"})]});return g.jsxs(l,{"data-value":y.uid,"data-index":n,...d,children:[y.templateContent?y.templateContent:g.jsxs(g.Fragment,{children:[i&&y.displayText,!i&&g.jsx("div",{className:"sf-list-text-content",children:y.hasUrl?g.jsx("a",{className:`${sn} ${cr}`,href:String(y.fieldData[String(y.mergedFields.url)]),children:g.jsxs("div",{className:fr,children:[g.jsx(b,{}),y.displayText,y.hasChild&&g.jsx(F,{})]})}):g.jsxs(g.Fragment,{children:[g.jsx(b,{}),!y.fieldData.isHeader&&m&&(M==="Left"?g.jsxs(g.Fragment,{children:[g.jsx(T,{position:"Left"}),g.jsx(D,{}),y.hasChild&&g.jsx(F,{})]}):g.jsxs(g.Fragment,{children:[g.jsx(D,{}),g.jsx(T,{position:"Right"}),y.hasChild&&g.jsx(F,{})]})),!m&&g.jsxs(g.Fragment,{children:[g.jsx(D,{}),y.hasChild&&g.jsx(F,{})]})]})})]}),!y.grpLI&&z&&g.jsx($,{})]},y.uid)}),gr=({checkBox:s,fields:c,listItemDatas:n,onSelect:t,setListItemDatas:i,scrollParent:o})=>{const[r,C]=e.useState(null),[m,M]=e.useState([]),k=l=>{const a=o!=null&&o.current&&"element"in o.current&&o.current.element?o.current.element:o==null?void 0:o.current;if(!a)return;const p=Math.max(0,Math.min(l,Math.max(0,(n==null?void 0:n.length)-1)));C(n[Number(p)]),Nt(p,a)},h=l=>{const a=c.disabled,p=l.isHeader===!0,d=a?l[String(a)]===!0||l[String(a)]==="true":!1,D=l[String(c.visible)]===!0;return!p&&!d&&!D},x=e.useCallback((l,a,p)=>{const d={data:a,event:l,selected:!0,index:p},D=(c==null?void 0:c.id)||"id",F=r?Math.max(0,n.findIndex(T=>String(T[String(D)])===String(r[String(D)])))===p:!1;if(t==null||t(d,F),!a[String(c.child)]){const T=a[String(D)].toString();M([T.toString()]),C(a)}},[t,i,n,r,c]),_=e.useCallback((l,a,p)=>{h(l)&&x(a,l,p)},[x,n]),S=e.useCallback(l=>{const a=c.checked||"checked",p=n.map(d=>{if(d[String(c.id)].toString()===l){const D=d[String(a)];return D===!0||D==="true"?(M(T=>T.filter(b=>b.toString()!==l.toString())),{...d,[a]:!1}):(M(T=>[...T,l.toString()]),{...d,[a]:!0})}return d});i(p)},[c,n,i]),E=e.useCallback((l,a,p)=>{var F;if(!l)return;const d=(F=l[String(c.id)])==null?void 0:F.toString(),D={data:l,event:a,index:p};t==null||t(D,!1),S(d),C(l)},[t,S,m,c]),z=(l,a,p,d)=>{let D=d==="arrowKey"?l+a:l;const F=c.disabled;for(;D>=0&&D<p.length;){const T=p[Number(D)],b=T.isHeader===!0,A=F?T[String(F)]===!0||T[String(F)]==="true":!1,P=T[String(c.visible)]===!0;if(!b&&!A&&!P)return D;D+=a}return-1},U=e.useCallback((l,a,p)=>{const D=z(l,a?-1:1,n,p);k(D!==-1?D:l)},[n]),$=e.useCallback((l,a)=>{if(!n||n.length===0)return;const p=a?n.length-1:0;U(p,a,"homeKey")},[n]),K=e.useCallback((l,a)=>{if(!n||n.length===0)return;const p=(c==null?void 0:c.id)||"id",d=r?Math.max(0,n.findIndex(F=>String(F[String(p)])===String(r[String(p)]))):-1,D=d===-1?a?n.length-1:-1:d;U(D,a,"arrowKey")},[n,r,c==null?void 0:c.id]),R=e.useCallback((l,a)=>{if(s&&Object.keys(n).length){const p=n[Number(a)];E(p,l,a)}},[s,n,E]),y=e.useCallback((l,a)=>{switch(l.key){case"Home":l.preventDefault(),$(l,!1);break;case"End":l.preventDefault(),$(l,!0);break;case"ArrowDown":l.preventDefault(),K(l,!1);break;case"ArrowUp":l.preventDefault(),K(l,!0);break;case" ":l.preventDefault(),R(l,a);break}},[$,K,s,R]);return{focusedItem:r,activeItemsId:m,handleSelection:_,keyActionHandler:y,setCheckboxLI:E}},pr=(s,c)=>{const{items:n,itemSize:t,pageSize:i,overscanCount:o=5,scrollParent:r,height:C=360,onScrollRequest:m,role:M="listbox",showSkeleton:k,initialVisibleIndex:h=0,itemContent:x,style:_,totalCount:S,className:E,...z}=s,U=e.useMemo(()=>typeof S=="number"&&S>0?S:n.length,[S,n.length]),[$,K]=e.useState(()=>Ot(U,0,t,i,o)),[R,y]=e.useState(0),[l,a]=e.useState(!1),p=e.useRef(null),d=e.useRef(!1),D=e.useRef(0),F=e.useRef(!1),T=e.useRef(null),b=e.useRef(0),A=e.useRef(0),P=e.useMemo(()=>Math.max(0,Math.floor(R/Math.max(1,t))),[R,t]),J=e.useMemo(()=>{if(!n||n.length===0)return-1;const G=Math.min(P,n.length-1);for(let ue=G;ue>=0;ue--){const f=n[Number(ue)];if(f.isHeader)return ue}return-1},[n,P]),B=e.useMemo(()=>J>=0?n[Number(J)]:null,[n,J]),ie={items:n,itemSize:t,pageSize:i,overscanCount:o,scrollParent:r,height:C,showSkeleton:k,initialVisibleIndex:h,totalCount:S};e.useImperativeHandle(c,()=>({...ie,element:(r==null?void 0:r.current)||p.current}),[ie]),e.useEffect(()=>{K(Ot(U,R,t,i,o))},[U,t,i,o]),e.useEffect(()=>{if(F.current)return;const G=(r==null?void 0:r.current)||p.current;if(!G)return;const f=Math.max(0,Math.min(h,Math.max(0,U)))*t;G.scrollTop=f,F.current=!0,y(f),K(Ot(U,f,t,i,o))},[r==null?void 0:r.current,h,U,t,i,o]);const re=e.useMemo(()=>{const G=Math.min($.startIndex,n.length),ue=Math.min($.endIndex,n.length);return n.slice(G,ue)},[n,$.startIndex,$.endIndex]),Fe=e.useCallback(async(G,ue)=>{if(!m||!(ue.endIndex>=n.length))return;const v=n.length;let w=i+o;if(typeof S=="number"&&S>0){const V=Math.min(U,ue.endIndex);V>n.length&&(w=V)}if(d.current||D.current>n.length)return;d.current=!0,a(!0),D.current=v+w;const L=await m({startIndex:v,count:w,originalEvent:G});Promise.resolve(L).catch(()=>{a(!1)}).finally(()=>{d.current=!1,a(!1)})},[m,n.length,i,o,l,U,S]),Te=e.useCallback(G=>{const ue=(r==null?void 0:r.current)||p.current;if(!ue||l)return;const f=ue.scrollTop,v=Ot(U,f,t,i,o),w=b.current??0;if(Math.abs(v.startIndex-w)>o&&T.current){const V=v.offsetY||0;V!==A.current&&(T.current.style.transform=`translate3d(0px, ${V}px, 0px) translateZ(0px)`,A.current=V)}Fe(G,v),requestAnimationFrame(()=>{b.current=v.startIndex,y(f),K(v)})},[t,i,o,U,n.length,r,Fe,l]);e.useEffect(()=>{const G=(r==null?void 0:r.current)||p.current;if(G)return G.addEventListener("scroll",Te,{passive:!0}),()=>G.removeEventListener("scroll",Te)},[Te,r==null?void 0:r.current]),e.useEffect(()=>{k&&(n.length===0&&m?a(!0):n.length>0&&a(!1))},[n.length,m,k]);const we=e.useCallback(()=>g.jsxs(g.Fragment,{children:[B&&R>=t&&g.jsx("div",{className:"sf-pinned-group",children:x(J,B)}),g.jsx("div",{className:"sf-virtual-content sf-pos-relative",style:{height:$.totalHeight},children:g.jsx("div",{className:"sf-virtual-items",ref:T,style:{transform:`translate3d(0px, ${$.offsetY}px, 0px) translateZ(0px)`},children:k&&l&&re.length!==0?Array.from({length:re.length}).map((G,ue)=>g.jsx("div",{className:"sf-list-skeleton",style:{height:t}},`skeleton-${ue}`)):re.map((G,ue)=>{const f=$.startIndex+ue;return x(f,G)})})})]}),[t,$.totalHeight,$.offsetY,k,l,re,$.startIndex,x,B,J,R]),H=e.useMemo(()=>["sf-virtual-scroll-parent",E].filter(Boolean).join(" ").trim(),[E]);return r?we():g.jsx("div",{ref:p,role:M,className:H,style:{height:C,..._},...z,children:we()})},hr=e.forwardRef(pr),on="sf-list-parent sf-ul",mr={level:1,listRole:"list",listLabel:"list",itemRole:"listitem",groupItemRole:"group"},Wt={id:"id",text:"text",url:"url",checked:"checked",disabled:"disabled",icon:"icon",child:"child",visible:"visible",tooltip:"tooltip",htmlAttributes:"htmlAttributes",imageUrl:"imageUrl",groupBy:void 0},yr=e.memo(e.forwardRef(({items:s,fields:c=Wt,scrollParent:n,checkBox:t=!1,checkBoxPosition:i=qt.Left,virtualization:o,parentClass:r,itemTemplate:C,groupTemplate:m,ariaAttributes:M,getItemProps:k,onItemKeyDown:h,onSelect:x,setListItemDatas:_,onScrollRequest:S,disableDefaultInteractions:E=!1,disabled:z=!1},U)=>{M={...mr,...M};const K=e.useRef(null),R=e.useRef(null);e.useImperativeHandle(U,()=>K.current,[]);const y=gr({checkBox:t,fields:c,listItemDatas:s||[],onSelect:x,setListItemDatas:_||(()=>{}),scrollParent:n!=null&&n.current?n:R}),l=(c==null?void 0:c.id)??"id",a=e.useMemo(()=>{var b;if(!y.focusedItem||!s)return-1;const T=String((b=y.focusedItem)==null?void 0:b[String(l)]);return oe(T)?-1:s.findIndex(A=>String(A==null?void 0:A[String(l)])===String(T))},[y.focusedItem,s,l]),p=e.useCallback((T,b)=>{if(z)return;if(E){x==null||x({event:T,index:b},a===b);return}const A=T.currentTarget,P=s==null?void 0:s[Number(b)];P&&(t&&er(A)?A.classList.contains("sf-has-child")?y.handleSelection(P,T,b):y.setCheckboxLI(P,T,b):y.handleSelection(P,T,b))},[E,z,t,y]),d=e.useCallback(T=>{z||(E||y.keyActionHandler(T,a),h==null||h(T,a))},[E,y,h,a,z]),D=e.useMemo(()=>[r||"sf-list-container",o?"sf-virtualization":""].filter(Boolean).join(" ").trim(),[o,r]),F=e.useCallback((T,b)=>g.jsx(dr,{item:b,fields:c,index:T,onItemClick:p,getItemProps:k,itemTemplate:C,groupTemplate:m,checkBoxPosition:i,parentClass:r,ariaAttributes:M,checkBox:t,focusedIndex:a,isChecked:y.activeItemsId.includes(String(b==null?void 0:b[String(l)])),as:o?"div":"li"},`sf-item-${T}`),[c,p,k,C,m,i,r,M,t,a,y.activeItemsId,l]);return g.jsx("div",{ref:K,className:D,children:o?g.jsx("div",{ref:R,className:on,role:(M==null?void 0:M.listRole)??void 0,"aria-label":(M==null?void 0:M.listLabel)??void 0,tabIndex:0,onKeyDown:d,children:g.jsx(hr,{items:s,itemSize:o==null?void 0:o.itemSize,pageSize:o==null?void 0:o.pageSize,overscanCount:o==null?void 0:o.overscanCount,showSkeleton:o.showSkeleton,scrollParent:n||R,onScrollRequest:S,itemContent:F})}):g.jsx("ul",{ref:R,className:on,role:(M==null?void 0:M.listRole)??void 0,"aria-label":(M==null?void 0:M.listLabel)??void 0,tabIndex:0,onKeyDown:d,children:s==null?void 0:s.map((T,b)=>F(b,T))})})}));var Ct;(function(s){s.FetchViewPort="FetchViewPort",s.FetchAll="FetchAll"})(Ct||(Ct={}));const xr=s=>{const{dropdownValue:c,inputElementRef:n,required:t,valid:i,validationMessage:o}=s,r=e.useMemo(()=>i!==void 0?!!i:t?c!=null:!0,[i,t,c]);return e.useEffect(()=>{const C=r?"":o||"",m=(n==null?void 0:n.current)??void 0;m&&typeof m.setCustomValidity=="function"&&m.setCustomValidity(C)},[r,o,n]),{isInputValid:r}},pn=(s,c,n,t)=>{const i=s.length>0&&(typeof s[0]=="string"||typeof s[0]=="number"||typeof s[0]=="boolean");if(i||!c.groupBy)if(i&&n!==vt.None){const o=[...s];return n===vt.Ascending?o.sort((r,C)=>String(r).localeCompare(String(C))):n===vt.Descending&&o.sort((r,C)=>String(C).localeCompare(String(r))),o}else{const o=dn(n,(c==null?void 0:c.text)||"text",t),r=gn(s,o);return r&&Array.isArray(r.result)?r.result:r}else return Yn(s,c,n)},hn=s=>{switch(String(s??"")){case"StartsWith":return"startsWith";case"EndsWith":return"endsWith";case"Contains":return"contains";default:return"contains"}},mn=(s,c,n)=>{if(oe(s)||!Array.isArray(c)||c.length===0)return-1;const t=(n==null?void 0:n.value)||"value",i=String(typeof s=="object"?ae(t,s):s);for(let o=0;o<c.length;o++){const r=c[o];if(!oe(r)&&!(typeof r=="object"&&(r!=null&&r.isHeader))){if(typeof r=="object"){const C=ae(t,r);if(!oe(C)&&String(C)===i)return o}else if(String(r)===i)return o}}return-1},Ne=(s,c,n)=>{let t;return c==="value"?t=(n==null?void 0:n.value)??"value":t=(n==null?void 0:n.text)??"text",typeof s=="string"||typeof s=="number"||typeof s=="boolean"?s:typeof s=="object"&&s!==null?ae(t,s):""},Mt=s=>typeof s=="string"||typeof s=="number"||typeof s=="boolean",Sr=(s,c)=>{const n=s??"",t=(c??"").toLowerCase();if(!t)return[{text:n,highlight:!1}];const i=n.toLowerCase(),o=[];let r=0;for(;r<n.length;){const C=i.indexOf(t,r);if(C===-1){o.push({text:n.slice(r),highlight:!1});break}C>r&&o.push({text:n.slice(r,C),highlight:!1}),o.push({text:n.slice(C,C+t.length),highlight:!0}),r=C+t.length}return o},br=s=>{const{isDropdownFiltering:c,ignoreCase:n,ignoreAccent:t,filterType:i,fields:o,dataSource:r,onFilter:C,setListData:m,baseQuery:M,externalFilterInputRef:k}=s,[h,x]=e.useState(""),[_,S]=e.useState(!1),E=s.externalTypedString!==void 0?s.externalTypedString:h,z=s.setExternalTypedString||x,U=e.useCallback((l,a)=>{if((k==null?void 0:k.current)!=null&&k.current.value.trim()!==""){const p=a||M||new Ce;if(!a){const d=hn(i);Array.isArray(l)&&l.length>0&&(typeof l[0]=="string"||typeof l[0]=="number"||typeof l[0]=="boolean")?p.where("",d,k.current.value,n,t):p.where(o.text||"text",d,k.current.value,n,t)}m(l,p,!0,k.current.value)}else m(l,a||M||new Ce,!0)},[i,o,n,t,m,M]),$=e.useCallback((l,a)=>{if(c&&(k==null?void 0:k.current)!=null){const p={preventDefaultAction:!1,text:a,event:l};C&&C(p),!_&&!p.preventDefaultAction&&r&&U(r,null)}},[c,U,C,_,r]),K=e.useCallback((l,a,p)=>{var D;S(!0);const d=((D=k==null?void 0:k.current)==null?void 0:D.value)||E;if(d){const F=a||new Ce;a||F.where((p==null?void 0:p.text)||"text","contains",d,n),U(l,F)}else U(l,a)},[E,n,U]),R=e.useCallback(l=>{z(l.target.value),$(l,l.target.value)},[$]),y=e.useCallback(l=>{l.preventDefault(),l.stopPropagation(),z(""),m(r,M||new Ce,!0)},[z,m,r,M]);return{handleInputChange:R,clearText:y,filter:K}},Pt=(s,c)=>s===null?null:e.isValidElement(s)?s:typeof s=="function"?s():null,vr=({headerTemplate:s})=>g.jsx(g.Fragment,{children:Pt(s)}),Cr=e.memo(vr),kr=({footerTemplate:s})=>g.jsx(g.Fragment,{children:Pt(s)}),Ir=e.memo(kr),wr=({noRecordsTemplate:s,defaultText:c})=>{const n=g.jsx("div",{className:"sf-content sf-dd-base sf-dd-nodata",children:c}),t=Pt(s);return g.jsx(g.Fragment,{children:t??n})},jr=e.memo(wr),Mr=({errorTemplate:s,defaultText:c})=>{const n=g.jsx("div",{className:"sf-content sf-dd-base sf-dd-nodata",children:c}),t=Pt(s);return g.jsx(g.Fragment,{children:t??n})},Nr=e.memo(Mr),Tr={text:"text",value:"value",disabled:"disabled",groupBy:void 0,htmlAttributes:"htmlAttributes"},Xe={root:"sf-dd-base",content:"sf-content",selected:"sf-active",focus:"sf-item-focus",li:"sf-list-item",disabled:"sf-disabled",grouping:"sf-dd-group",hover:"sf-hover",noData:"sf-dd-nodata"},yn=e.forwardRef((s,c)=>{const{dataSource:n=[],fields:t=Tr,value:i,query:o,isDropdownFiltering:r=!1,filterPlaceholder:C="",ignoreCase:m,ignoreAccent:M,filterType:k="StartsWith",size:h=tt.Medium,itemTemplate:x,groupTemplate:_,headerTemplate:S,footerTemplate:E,sortOrder:z=vt.None,noRecordsTemplate:U,onErrorTemplate:$,allowObjectBinding:K=!1,activeIndex:R,id:y,debounceDelay:l=0,remoteCacheRef:a,itemData:p,virtualization:d,focusedItem:D,externalFilterInputRef:F,onError:T,onItemClick:b,onFilter:A,keyActionHandler:P,onDataRequest:J,onDataLoad:B,onScroll:ie}=s,{locale:re}=zt(),Te=cn("dropdownList",{noRecordsMessage:"No Records Found",errorMessage:"Request Failed"},re||"en-US"),we=(o==null?void 0:o.clone())??new Ce,[H,G]=e.useState([]),[ue,f]=e.useState(!1),[v,w]=e.useState(!1),[L,V]=e.useState(null),[ee,ye]=e.useState(null),[xe,ke]=e.useState(""),[Je,Ie]=e.useState(!1),Le=e.useRef([]),ge=e.useRef(null),Qe=e.useRef(xe),Ze=e.useRef(null),X=e.useRef(null),kt=e.useRef(null),je=e.useRef([]),dt=e.useRef(0),mt=e.useRef(!1),nt=e.useCallback(u=>{mt.current=u,f(u)},[]),ve=e.useCallback(u=>{let I;if(r){I=u.clone();const N=Qe.current??"";if(N!==""){const O=hn(k),q=de(n).typeof;if(!(n instanceof Ke)&&(q==="string"||q==="number"||q==="boolean"))I.where("",O,N,m,M);else{const De=t!=null&&t.text?t.text:"text";I.where(De,O,N,m,M)}}}else I=u.clone();return I.clone()},[o,r,k,m,M,t]),Ae=e.useCallback(u=>{v||w(!0);const I=pn(u,t,z,o??new Ce);G(I)},[t,z,o,v]),ot=e.useCallback(u=>{if(!(n instanceof Ke)||!(a!=null&&a.current)||!u)return;const I=Array.from(a==null?void 0:a.current),N=typeof u=="string"||typeof u=="number"||typeof u=="boolean",O=String(N?u:ae(t.value,u));I.some(ne=>String(N?typeof ne!="object"&&ne:typeof ne=="object"&&ae(t.value,ne))===O)||(I.push(u),a.current=I)},[t,a]),It=e.useCallback((u,I,N,O)=>{var De;if(N&&u instanceof Ke&&d&&d.scrollMode===Ct.FetchViewPort){yt(u,I,N,O);return}let q;Array.isArray(u)?q=u.filter(Z=>Z!=null):q=u,Qe.current=O??"";const ne={data:q,query:I};if(q instanceof Ke){const Z=q;if(r&&!N&&ot(p),a!=null&&a.current&&!N){const Q=a.current,Se=new Ke(Q),Y=ne.query?ne.query:ve(new Ce);Y.queries.some(ut=>ut.fn==="onTake")&&(Y.queries=(De=Y==null?void 0:Y.queries)==null?void 0:De.filter(ut=>ut.fn!=="onTake"),Y.take(Q.length));const qe=Y.executeLocal(Se),Ve={data:qe&&Array.isArray(qe.result)?qe.result:qe};B==null||B(Ve),Ae(Ve.data);return}ue||(J==null||J({data:ne.data,query:I?ne.query:ve(new Ce)}),f(!0),Ie(!1),Z.executeQuery(ne.query?ne.query:ve(new Ce)).then(Q=>{const Se=Q&&Array.isArray(Q.result)?Q.result:[];if(a&&!N&&(a.current=Se),!Q.cancel){const Y={data:Q.result};B==null||B(Y,N),Ae(Y.data)}f(!1),Ie(!1)}).catch(Q=>{f(!1),Ie(!0),w(!1),T==null||T(Q)}))}else{const Z=new Ke(ne.data),Se={data:ve(ne.query||new Ce).executeLocal(Z)};B==null||B(Se),Ae(Se.data),f(!1),Ie(!1)}},[ue,ve,z,T,$,J,B,Ae,ot]),yt=e.useCallback(async(u,I,N,O,q)=>{var Q,Se;N&&(je.current=[]),Qe.current=O??"";const ne={data:u,query:I},De=u;r&&!N&&p&&ot(p);const Z=!!(r&&((Q=ge==null?void 0:ge.current)!=null&&Q.value));if(N&&d&&Z){const Y=d.pageSize+(d.overscanCount??5),qe=ve(new Ce).skip(0).take(Y).requiresCount();mt.current||(J==null||J({data:ne.data,query:qe}),nt(!0),Ie(!1),await De.executeQuery(qe).then(be=>{const Ve=be&&Array.isArray(be.result)?be.result:[];je.current=je.current.concat(Ve),dt.current++,Ae(je.current),nt(!1),Ie(!1)}).catch(be=>{nt(!1),Ie(!0),w(!1),T==null||T(be)}));return}if(a!=null&&a.current&&!q){const Y=a.current,qe=new Ke(Y),be=ne.query;be.queries.some(bt=>bt.fn==="onTake")&&(be.queries=(Se=be==null?void 0:be.queries)==null?void 0:Se.filter(bt=>bt.fn!=="onTake"),be.take(Y.length));const Ve=be.executeLocal(qe),rt={data:Ve&&Array.isArray(Ve.result)?Ve.result:Ve};B==null||B(rt),Ae(rt.data);return}mt.current||(J==null||J({data:ne.data,query:ne.query}),nt(!0),Ie(!1),await De.executeQuery(ne.query).then(Y=>{const qe=Y&&Array.isArray(Y.result)?Y.result:[];if(Z){let be=[];Array.isArray(je.current)&&(be=je.current);const Ve=be.concat(qe);je.current=Ve}else if(a&&!N){let be=[];Array.isArray(a.current)&&(be=a.current);const Ve=be.concat(qe);a.current=Ve}Y.cancel||(Z&&(je!=null&&je.current)?Ae(je.current):a!=null&&a.current&&(B==null||B({data:a.current}),Ae(a.current))),nt(!1),Ie(!1)}).catch(Y=>{nt(!1),Ie(!0),w(!1),T==null||T(Y)}))},[ve,T,J,B,Ae,ot,r,ge,p,d,Qe,a,je,nt,w,Ie,dt,mt]),ce=e.useCallback(async u=>{var O,q;if(!(n instanceof Ke)||d&&d.scrollMode===Ct.FetchAll){ie==null||ie(u);return}const I=!!(r&&((O=ge==null?void 0:ge.current)!=null&&O.value));Qe.current=I?(q=ge==null?void 0:ge.current)==null?void 0:q.value:Qe.current;const N=ve(new Ce).skip(u.startIndex).take(u.count).requiresCount();await yt(n,N,!1,void 0,!0),ie==null||ie(u)},[n,ie,yt,ve,r,ge,Qe,d]),{handleInputChange:Re,clearText:lt,filter:xt}=br({isDropdownFiltering:r,ignoreCase:m,ignoreAccent:M,filterType:k,fields:t,dataSource:n,baseQuery:we,onFilter:A,setListData:It,externalTypedString:xe,setExternalTypedString:ke,externalFilterInputRef:F??ge}),Ee=e.useMemo(()=>{const u=Array.isArray(H)&&H.length>0&&(typeof H[0]=="string"||typeof H[0]=="number"||typeof H[0]=="boolean");return[Xe.content,Xe.root,!u&&t.groupBy?Xe.grouping:"",H.length===0?"sf-dd-nodata":""].filter(Boolean).join(" ")},[t.groupBy,H]),ze=g.jsx(jr,{noRecordsTemplate:U,defaultText:Te.getConstant("noRecordsMessage")}),at=g.jsx(Nr,{errorTemplate:$,defaultText:Te.getConstant("errorMessage")});e.useEffect(()=>{if(i!=null&&H.length>0){const u=new Map;H.forEach((N,O)=>{const q=String(typeof N=="object"?ae(t.value??"",N):N);u.set(q,O)});const I=u.get(String(i))??-1;I!==-1&&V(I)}else i==null&&V(null)},[i,H,t]),e.useEffect(()=>{r&&ge.current&&ge.current.focus({preventScroll:!0})},[r,ge.current]),e.useEffect(()=>{if(!v||kt.current!==JSON.stringify(n))if(kt.current=JSON.stringify(n)??null,n instanceof Ke&&d&&d.scrollMode===Ct.FetchViewPort){const u=d.pageSize+(d.overscanCount??5),I=ve(new Ce).skip(0).take(u).requiresCount();yt(n,I)}else It(n,o)},[n,o,v]),e.useEffect(()=>{H.length>0?ye(R||0):ye(null)},[H,R]),e.useEffect(()=>()=>{X.current&&(clearTimeout(X.current),X.current=null)},[]);const Me=e.useCallback((u,I)=>{var Q;const N=(Q=Ze==null?void 0:Ze.current)==null?void 0:Q.parentElement,O=N.style.display;N.style.visibility="hidden",N.style.display="block";const q=I.offsetTop,ne=q+I.offsetHeight,De=u.scrollTop,Z=u.scrollTop+u.clientHeight;ne>Z?u.scrollTop=ne-u.clientHeight:q<De&&(u.scrollTop=Math.max(0,q)),N.style.visibility="",N.style.display=O},[Ze]);e.useEffect(()=>{if(!v||oe(p))return;const u=typeof p=="object"&&p!==null?ae((t==null?void 0:t.value)??"value",p):p;if(oe(u))return;const I=He(),N=I==null?void 0:I.find(q=>{var ne;return((ne=q==null?void 0:q.dataset)==null?void 0:ne.value)===String(u)}),O=Ye();if(N&&O)Me(O,N);else if(d&&O){const q=mn(p,H,t);q!==-1&&Nt(q,O)}},[v]);const de=e.useCallback(u=>{let I={typeof:null,item:null};if(!Array.isArray(u)||u.length===0)return I;for(let N=0;N<u.length;N++)if(u[N]!==null&&u[N]!==void 0&&!(typeof u[N]=="string"||typeof u[N]=="number"||typeof u[N]=="boolean"?oe(u[N]):oe(ae(t.value,u[N]))))return I={typeof:typeof u[N],item:u[N]};return I},[t]),it=e.useCallback(u=>{if(H&&H.length){const I=de(H);if(typeof ae(t.value,I.item)=="number"||I.typeof==="number")return parseFloat(u);if(typeof ae(t.value,I.item)=="boolean"||I.typeof==="boolean")return u==="true"||""+u=="true"}return u},[H,t,de]),he=e.useCallback(u=>{if(!oe(H)){const I=de(H).typeof;if(I==="string"||I==="number"||I==="boolean")for(let N=0;N<H.length;N++){const O=H[N];if(!oe(O)&&String(O)===String(u))return O}else for(let N=0;N<H.length;N++){const O=H[N];if(!oe(O)&&String(ae(t.value,O))===String(u))return O}}},[H,t,de]),Oe=e.useCallback((u,I,N)=>oe(u)?!1:N?String(u).toLowerCase()===(I==null?void 0:I.toString().toLowerCase()):String(u)===(I==null?void 0:I.toString()),[]),Be=e.useCallback((u,I)=>{if(!oe(H)){const O=H.find(q=>!oe(ae(t.value,q))&&Oe(String(ae(t.value||"",q)),u,I));return O?ae(t.text||t.value,O):null}return null},[H,t,de]),Pe=e.useCallback(u=>{const I=de(n).typeof;return I==="string"||I==="number"||I==="boolean"?u.toString():Be(u,!!m)||""},[Be,de,n]),se=e.useCallback(u=>{var N;const I=((N=u.event.currentTarget.dataset)==null?void 0:N.value)??null;if(I){let O;const q=de(n).typeof;q==="string"||q==="number"||q==="boolean"?O=I:O=he(it(I)),O&&Pe(I)}V(u.index),ye(null),b==null||b(u.event,u.index)},[he,it,Pe,b,de,n]),Ue=e.useCallback(u=>{let I="",N="",O=!1;if(i!==null)if(typeof u.item=="string"||typeof u.item=="number"||typeof u.item=="boolean")I=N=String(u.item),O=String(u.item)===String(i);else if(I=String(ae(t.value||"",u.item)),N=String(ae(t.text||t.value||"",u.item)),K){const Q=t==null?void 0:t.value,Se=Q&&typeof i=="object"&&i!==null?i[Q]:void 0;O=I===String(Se??"")}else O=I===String(i);let q=L!==null?u.index===L:O;try{const Q=p;if(Q!=null){const Se=String(typeof Q=="object"?ae(t.value||"value",Q):Q),Y=String(typeof Q=="object"?ae(t.text||t.value||"",Q):Q);q=String(I)===Se&&String(N)===Y}}catch{q=!1}let ne=p?!1:(H==null?void 0:H[0]).isHeader?u.index===1:u.index===0;D!=null&&(ne=String(Ne(u.item,"value",t))===String(Ne(D.item,"value",t)));const De=t.disabled&&typeof u.item=="object"&&ae(t.disabled,u.item)===!0;return{className:[q?Xe.selected:"",ne?Xe.focus:"",De?Xe.disabled:""].filter(Boolean).join(" "),id:`${y}-option-${u.index}`,"aria-selected":q?"true":"false","aria-disabled":De?"true":"false",ref:Q=>{Le.current[u.index]=Q}}},[H,L,Ee,i,t,Xe,ee,p,y,D]),ct=e.useMemo(()=>!t||Object.keys(t).length===0?t:Object.keys(t).length>0?{id:t==null?void 0:t.value,text:t==null?void 0:t.text,groupBy:t==null?void 0:t.groupBy,disabled:t==null?void 0:t.disabled,htmlAttributes:t==null?void 0:t.htmlAttributes}:t,[t]),te=e.useMemo(()=>g.jsx(yr,{getItemProps:Ue,items:H,parentClass:Ee,itemTemplate:x,groupTemplate:_,fields:ct,ariaAttributes:{itemRole:"option",listRole:"listbox",groupItemRole:"presentation"},onSelect:se,virtualization:d,onScrollRequest:ce,disableDefaultInteractions:!0},`list-base${dt.current}`),[Ee,x,_,H,se,Ue,t,p,dt]),He=e.useCallback(()=>(t.groupBy||x)&&Ze.current?Array.from(Ze.current.getElementsByClassName(Xe.li)):Le.current.filter(Boolean),[t.groupBy,x,Xe.li]),Ye=e.useCallback(()=>{const u=Ze.current;if(!u)return null;const I=u.querySelector(".sf-ul");return I||null},[]),St=e.useCallback(()=>H,[H,It]),gt=e.useCallback(u=>{var O;let I=-1;const N=He();for(let q=0;q<N.length;q++){const ne=((O=N[q].dataset)==null?void 0:O.value)??null;if(!oe(u)&&!oe(ne)&&String(ne)===String(u)){I=q;break}}return I},[He]),wt=e.useCallback(u=>{var I,N;if(l&&l>0){const O=F?(I=F.current)==null?void 0:I.value:(N=ge.current)==null?void 0:N.value;X.current&&(clearTimeout(X.current),X.current=null),ke(O),X.current=window.setTimeout(()=>{Re(u),clearTimeout(X.current),X.current=null},l)}else Re(u)},[l,Re,ge,X,ke,F]),Ht=e.useCallback((u,I,N,O,q)=>{if(O){wt(O);return}if(q){lt(q);return}xt(u,I,N)},[xt,wt,lt]);e.useImperativeHandle(c,()=>({getFormattedValue:it,getDataByValue:he,getIndexByValue:gt,getTextByValue:Pe,getScrollContainer:Ye,getListItems:He,getFilteredListData:St,filterType:k,externalFilterInputRef:F,filter:Ht}),[it,he,gt,Pe,He,H,Ye]);const pt=u=>u==="ArrowUp"||u==="ArrowDown"||u==="Home"||u==="End"||u==="PageUp"||u==="PageDown",$t=e.useCallback(u=>{u.key!=="Enter"&&!pt(u.key)&&(P==null||P(u))},[s.keyActionHandler]),Tt=e.useCallback(u=>{if(u.key==="Enter"){u.stopPropagation(),P==null||P(u);return}if(pt(u.key)){u.preventDefault(),u.stopPropagation(),P==null||P(u);return}},[P]);return g.jsx(g.Fragment,{children:v?g.jsxs("div",{className:h===tt.Small?"sf-small":h===tt.Large?"sf-large":"sf-medium",ref:Ze,children:[r&&!(F!=null&&F.current)&&g.jsx("span",{className:"sf-ddl-filter-parent",children:g.jsxs("span",{className:`sf-input-group sf-control sf-input-focus ${h===tt.Small?"sf-small":h===tt.Large?"sf-large":"sf-medium"}`,children:[g.jsx(un,{name:y+"_filter",ref:ge,type:"text",value:xe,className:"sf-input-filter",placeholder:C,title:"Filter",onChange:wt,onKeyUp:$t,onKeyDown:Tt}),ue?g.jsx(Ut,{size:h===tt.Small?"16px":"20px",visible:!0}):fn(xe,lt)]})}),S&&g.jsx("div",{className:"sf-dd-header",children:g.jsx(Cr,{headerTemplate:S})}),H.length===0?ze:te,E&&g.jsx("div",{className:"sf-dd-footer",children:g.jsx(Ir,{footerTemplate:E})})]}):Je&&g.jsx("div",{className:Xe.root+" "+Xe.content+" "+Xe.noData,children:at})})});e.memo(yn);const Dr=(s={})=>{const{value:c,defaultValue:n,open:t,loading:i,onChange:o}=s,[r,C]=e.useState(!!t),[m,M]=e.useState(""),[k,h]=e.useState(!1),[x,_]=e.useState(!!i),[S,E]=e.useState(null),[z,U]=e.useState(null),$=e.useMemo(()=>t!==void 0,[t]),K=e.useMemo(()=>c!==void 0&&!!o,[c,o]),R=e.useMemo(()=>K||c!==void 0?c:n!==void 0?n:null,[K,c,n]),[y,l]=e.useState(R);return e.useEffect(()=>{$&&C(!!t)},[$,t]),e.useEffect(()=>{_(!!i)},[i]),e.useEffect(()=>{K&&l(c)},[K,c]),[{isPopupOpen:r,dropdownValue:y,textValue:m,isSpanFocused:k,isLoading:x,activeIndex:S,itemData:z},{setIsPopupOpen:d=>C(d),setDropdownValue:d=>l(d),setTextValue:d=>M(d),setIsSpanFocused:d=>h(d),setIsLoading:d=>_(d),setActiveIndex:d=>E(d),setItemData:d=>U(d)}]},Fr=s=>{const c=e.useMemo(()=>["sf-ddl sf-popup",s.className].filter(Boolean).join(" "),[s.className]),{isPopupOpen:n,open:t,setIsPopupOpen:i,setIsSpanFocused:o,spanElementRef:r,inputElementRef:C,popupRef:m,onOpen:M,onClose:k,popupWidth:h,popupHeight:x}=s,_=e.useMemo(()=>t!==void 0,[t]),S=e.useCallback(R=>{var y;_||(i(!0),(y=C.current)==null||y.focus()),M&&M({event:R})},[_,i,C,M,m]),E=e.useCallback(R=>{_||i(!1),k&&m.current&&k({event:R}),t||o(!0)},[_,i,k,m,t,o,C]),z=e.useCallback(R=>{var d,D,F;const y=R.target,l=!!r.current&&!r.current.contains(y)&&y.isConnected,a=!!((d=m.current)!=null&&d.element)&&!m.current.element.contains(y),p=y instanceof Element?y:null;(n&&l&&a||!l&&((F=(D=m.current)==null?void 0:D.element)!=null&&F.classList.contains("sf-input-group")))&&(E(R),o(!1)),l&&!(p&&p.matches(".sf-list-item"))&&!(p&&p.matches(".sf-input-icon"))&&o(!1)},[n,E,o,r,m]),U=e.useCallback((R,y,l)=>{const a=an(R);if(!a.includes("%"))return a;const p=parseFloat(a);if(!y||Number.isNaN(p))return a;const d=typeof y.getBoundingClientRect=="function"?y.getBoundingClientRect():null,D=l==="width"?y.offsetWidth:y.offsetHeight,F=d?l==="width"?d.width:d.height:0;let T=0;if(typeof window<"u"&&window.getComputedStyle){const A=window.getComputedStyle(y),P=l==="width"?A.width:A.height;T=parseFloat(P||"0")||0}return`${(D||F||T||0)*p/100}px`},[]),$=e.useCallback(()=>U(h,r.current,"width"),[h,r,U]),K=e.useCallback(()=>U(x,C.current,"height"),[x,C,U]);return e.useEffect(()=>(n&&document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}),[n,z]),e.useEffect(()=>{const R=y=>{var a;const l=((a=m.current)==null?void 0:a.element)&&!m.current.element.contains(y.target)&&!r.current.contains(y.target);n&&l&&(E(y),o(!1))};return n&&document.addEventListener("scroll",R,!0),()=>{document.removeEventListener("scroll",R,!0)}},[n,E,m,o]),{showPopup:S,hidePopup:E,setPopupWidth:$,setPopupHeight:K,popupClassNames:c}},Lr=s=>{const{value:c,defaultValue:n,dataSource:t,dataSourceListItems:i,fields:o,isValueControlled:r,allowObjectBinding:C,dropdownbaseRef:m,dropdownValue:M,setDropdownValue:k,setTextValue:h,setActiveIndex:x,setItemData:_,prefetchData:S}=s,E=e.useRef(n),z=e.useRef(!1),U=e.useRef(t),$=e.useCallback(l=>{if(Array.isArray(t)){const d=t[0];if((typeof d=="string"||t.length===0)&&typeof l=="boolean"){h("");return}else if(typeof d=="object"&&!C)return}const a=o==null?void 0:o.text,p=a&&l&&typeof l=="object"?String(l[a]):"";h(Mt(l)?String(l):C&&a?String(p):"")},[t,Mt,h]),K=e.useCallback(l=>{const a=o==null?void 0:o.value;return C&&l&&typeof l=="object"&&a?l[a]??null:l??null},[C,o==null?void 0:o.value]),R=e.useCallback((l,a)=>{const p=o==null?void 0:o.value;if(a&&typeof a=="object"&&p){for(let d=0;d<a.length;d++)if(ae(p,a[d].item)===l)return{index:d,textValue:ae(o.text||o.value,a[d].item)}}return{index:-1,textValue:l}},[o==null?void 0:o.value,o==null?void 0:o.text]),y=e.useCallback((l,a)=>{if(!Array.isArray(l)||oe(a))return!1;const p=l.length>0&&Mt(l[0]),d=o==null?void 0:o.value,D=o==null?void 0:o.text,F=new Map;l.forEach((b,A)=>{const P=p?String(b):d?String(ae(d,b)):"";F.set(P,A)});const T=F.get(String(a))??-1;if(T!==-1){const b=l[T],A=String(p?b:D?ae(D,b):a);return h(A),x(T),_==null||_(b),!0}return!1},[o==null?void 0:o.value,o==null?void 0:o.text,Mt,x,h]);e.useLayoutEffect(()=>{var p,d,D,F,T;if(r){const b=c;if(oe(b))h(""),x(null);else{k(b);const A=m!=null&&m.current?(p=m==null?void 0:m.current)==null?void 0:p.getFilteredListData():t;if(A&&Array.isArray(A))y(A,b)||$(b);else if(A instanceof Ke){const P=K(b);if(oe(P))h(""),x(null);else{let J=((D=(d=m==null?void 0:m.current)==null?void 0:d.getTextByValue)==null?void 0:D.call(d,P))??"",B=((T=(F=m==null?void 0:m.current)==null?void 0:F.getIndexByValue)==null?void 0:T.call(F,P))??-1;if(J===""&&!(m!=null&&m.current))if(i&&i.length>0){const{index:ie,textValue:re}=R(P,i);J=re,B=ie}else S&&S().then(ie=>{!ie||ie.length===0||y(ie,b)||$(b)});h(J),x(B!==-1?B:null)}}}return}const l=JSON.stringify(E.current)!==JSON.stringify(n),a=JSON.stringify(U.current)!==JSON.stringify(t);if(!z.current||l||a){const b=c??n??M;oe(b)?(h(""),x(null)):(k(b),t&&Array.isArray(t)?y(t,b)||$(b):t instanceof Ke&&S&&S().then(A=>{!A||A.length===0||y(A,b)||$(b)})),z.current=!0,E.current=n,U.current=t}},[r,c,n,t,o==null?void 0:o.value,o==null?void 0:o.text,y,k,$,h,x])},Ar=s=>{const{isInteractive:c,skipDisabledItems:n,activeIndex:t,isRemoteData:i,dataSourceListItems:o,fields:r,onChange:C,setTextValue:m,setActiveIndex:M,dropdownbaseRef:k,showPopup:h,hidePopup:x,setIsSpanFocused:_,setDropdownValue:S,prefetchData:E,currentItemData:z,setItemData:U,onScroll:$,virtualization:K,filterable:R}=s,[y,l]=e.useState(null),a=e.useCallback(f=>f.map(v=>{const w=(r==null?void 0:r.disabled)&&typeof v=="object"&&ae(r.disabled,v)===!0,L=typeof v=="object"&&!!ae("isHeader",v);return{item:v,isDisabled:!!w,isHeader:L}}),[r==null?void 0:r.disabled]),p=e.useCallback(f=>f!=null&&f.isHeader?!0:!!(f!=null&&f.isDisabled),[]),d=e.useCallback((f,v,w)=>{if(!n)return Math.max(0,Math.min(f.length-1,v+w));let L=v;const V=f.length;for(let ee=0;ee<V&&(L+=w,!(L<0||L>=f.length));ee++)if(!p(f[L]))return L;return-1},[n,p]),D=e.useCallback((f,v=!1)=>{if(!n)return v?f.length-1:0;if(v){for(let w=f.length-1;w>=0;w--)if(!p(f[w]))return w;return-1}else{for(let w=0;w<f.length;w++)if(!p(f[w]))return w;return-1}},[n,p]),F=e.useCallback((f,v)=>{if(!n||!p(f[v]))return v;let w=v,L=v;for(;w<f.length-1||L>0;){if(w<f.length-1&&(w++,!p(f[w])))return w;if(L>0&&(L--,!p(f[L])))return L}return-1},[n,p]),T=f=>String(Ne(f.item,"text",r)??""),b=(f,v,w)=>{if(!f||f.length===0||!v)return-1;const L=f.length;let V=Math.max(-1,Math.min(L-1,w));for(let ee=0;ee<L;ee++){V=(V+1)%L;const ye=f[V];if(!p(ye)&&T(ye).toLowerCase().startsWith(v))return V}return-1},A=(f,v,w)=>{const L=Ne(f.item,"value",r);m==null||m(String(Ne(f.item,"text",r))),L!==void 0&&(S==null||S(L),U==null||U(f.item)),C&&L!==void 0&&C({event:v,previousItemData:w==null?void 0:w.item,value:L,itemData:f.item})},P=()=>{var v,w;const f=k.current?(w=(v=k.current)==null?void 0:v.getFilteredListData)==null?void 0:w.call(v):null;return Array.isArray(f)?a(f):o},J=f=>{const v=typeof z=="object"&&z!==null?ae((r==null?void 0:r.value)??"value",z):z,w=f.findIndex(L=>String(Ne(L.item,"value",r))===String(v??""));return w!==-1||z?w:t??-1},B=e.useCallback((f,v,w,L)=>{M(w);const V=L>-1?v[L]:void 0;if(A(v[w],f,V),w>=v.length-1&&K&&$){const ye=Array.isArray(v)?v.length:0,xe=K.overscanCount??5,ke=K.pageSize+xe;$({originalEvent:f.nativeEvent,startIndex:ye,count:ke})}},[M,A,K,$]),ie=e.useCallback(f=>{const v=f.key.toLowerCase(),w=V=>{var xe,ke;if(V.length===0)return;const ee=J(V),ye=b(V,v,ee);ye!==-1&&(B(f,V,ye,ee),k.current&&Nt(ye,(ke=(xe=k.current)==null?void 0:xe.getScrollContainer)==null?void 0:ke.call(xe)))};if((!o||o.length===0)&&E&&i){we(f);return}const L=P();L&&w(L)},[t,i,o,E,a,k,M,n,A,z,r,B]),re=e.useCallback(f=>{var V,ee;const v=P();if(!v||v.length===0)return l(null),null;const w=b(v,f.toLowerCase(),-1);let L=null;return w===-1?l(null):(l(v[w]),L=String(Ne(v[w].item,"text",r)),k.current&&Nt(w,(ee=(V=k.current)==null?void 0:V.getScrollContainer)==null?void 0:ee.call(V))),L},[P,b,l,k]),Fe=f=>f==="ArrowDown"||f==="ArrowUp"||f==="PageUp"||f==="PageDown"||f==="Home"||f==="End",Te=e.useCallback((f,v,w)=>{if(y){const V=v.findIndex(ee=>String(Ne(ee.item,"value",r))===String(Ne(y.item,"value",r)));return l(null),V}const L=v.length;switch(f){case"ArrowDown":return d(v,w,1);case"ArrowUp":return d(v,w,-1);case"PageDown":{const V=w!==-1?w:0,ee=Math.max(0,Math.min(L-1,V+10));return F(v,ee)}case"PageUp":{const V=w!==-1?w:L-1,ee=Math.max(0,Math.min(L-1,V-10));return F(v,ee)}case"Home":return D(v,!1);case"End":return D(v,!0);default:return w}},[d,F,D,Ne,y]),we=f=>{E==null||E().then(v=>{if(!v||v.length===0)return;const w=a(v);H(f,w,f.key)})},H=e.useCallback((f,v,w)=>{var ee,ye;if(v.length===0)return;const L=J(v),V=Te(w,v,L);V!==L&&V>=0&&V<v.length&&(B(f,v,V,L),k.current&&Nt(V,(ye=(ee=k.current)==null?void 0:ee.getScrollContainer)==null?void 0:ye.call(ee)))},[t,M,Te,A,z,r,B]),G=(f,v)=>{v?(h(f),_(!0),f.preventDefault()):x(f),_(!0)};return{keyActionHandler:e.useCallback(f=>{var w;if(!c)return;if(f.altKey){if(f.key==="ArrowDown"){G(f,!0);return}if(f.key==="ArrowUp"){G(f,!1),f.preventDefault();return}}if(f.key===" "){G(f,!0);return}else if(f.key==="Enter")if(f.preventDefault(),k!=null&&k.current){const L=P();if(!L)return;let V=J(L);if(y){V=L.findIndex(ye=>String(Ne(ye.item,"value",r))===String(Ne(y.item,"value",r))),l(null);const ee=(w=k.current.externalFilterInputRef)==null?void 0:w.current;ee&&ee.setSelectionRange(ee.value.length,ee.value.length)}V&&V>=0&&V<L.length&&B(f,L,V,V),G(f,!1);return}else{G(f,!0);return}else if(f.key==="Tab"||f.key==="Escape"){if(G(f,!1),f.key==="Tab"){_(!1);return}f.preventDefault(),f.stopPropagation();return}if(f.key.length===1&&!f.ctrlKey&&!f.metaKey&&!f.altKey&&!R){f.preventDefault(),ie(f);return}if(Fe(f.key)){if(f.preventDefault(),(!o||o.length===0)&&E&&i){we(f);return}const L=P();L&&H(f,L,f.key)}},[c,k,h,x,_,o,E,a,H,t,i,z,G,P,we,y,l,re]),handleCustomTypeAhead:re,typeAheadMatchedItem:y,setTypeAheadMatchedItem:l}},Vr=({valueTemplate:s,dropdownValue:c,dataSource:n,fields:t,allowObjectBinding:i=!1,onRenderedChange:o})=>{const r=e.useMemo(()=>{if(!s||c==null||!Array.isArray(n)||n.length===0)return null;const C=n[0];return typeof C=="string"||typeof C=="number"||typeof C=="boolean"?new Map(n.map(h=>[h,h])).get(c)??null:n.find(k=>{const h=t.value?ae(t.value,k):k;return i?k===c:h===c||h!=null&&c!=null&&h.toString()===c.toString()})??null},[s,c,n,t,i]);return e.useEffect(()=>{o&&o(r!==null&&!!s)},[o,r,s]),!s||r===null?null:typeof s=="function"?g.jsx(g.Fragment,{children:s(r)}):g.jsx(g.Fragment,{children:s})},Rr=e.memo(Vr),xn=e.forwardRef((s,c)=>{const{id:n=`dropdown_${e.useId()}`,dataSource:t=[],fields:i,value:o,defaultValue:r,placeholder:C,disabled:m,readOnly:M,labelMode:k="Never",size:h=tt.Medium,variant:x=qn.Standard,className:_,required:S,inputProps:E,clearButton:z,dropdownIcon:U=g.jsx(zn,{}),loading:$,popupSettings:K,open:R,defaultOpen:y,query:l,sortOrder:a=vt.None,allowObjectBinding:p,customValue:d,itemTemplate:D,headerTemplate:F,footerTemplate:T,groupTemplate:b,noRecordsTemplate:A,onErrorTemplate:P,virtualization:J,ignoreCase:B,ignoreAccent:ie,filterable:re,filterType:Fe,debounceDelay:Te,valid:we,validationMessage:H,validityStyles:G,skipDisabledItems:ue=!0,autofill:f,autoHighlight:v,resizable:w,filterPlaceholder:L,onResize:V,onOpen:ee,onClose:ye,onDataRequest:xe,onDataLoad:ke,onError:Je,onScroll:Ie,onChange:Le,onFilter:ge,onCustomValueSelect:Qe,componentClassName:Ze,spanClickable:X,inputClassName:kt,valueTemplate:je,localeComponentName:dt,ariaLabel:mt,...nt}=s,ve=e.useMemo(()=>t instanceof Ke,[t]),{dir:Ae,locale:ot}=zt(),[It,yt]=Dr({defaultValue:r}),{isPopupOpen:ce,textValue:Re,isSpanFocused:lt,isLoading:xt,itemData:Ee,dropdownValue:ze,activeIndex:at}=It,{setTextValue:Me,setIsSpanFocused:de,setIsPopupOpen:it,setIsLoading:he,setDropdownValue:Oe,setActiveIndex:Be,setItemData:Pe}=yt,se=e.useRef(null),Ue=e.useRef(null),ct=e.useRef(null),te=e.useRef(null),He=e.useRef(null),Ye=e.useRef(!1),St=e.useRef(null),gt=e.useRef(null),[wt,Ht]=e.useState(1e3),[pt,$t]=e.useState({height:0,width:0}),[Tt,u]=e.useState(!1),I=e.useMemo(()=>!!(je&&Tt),[je,Tt]),N=e.useMemo(()=>({value:o,defaultValue:r,placeholder:C,disabled:m,className:_,labelMode:k,size:h,variant:x,required:S,inputProps:E,clearButton:z,loading:$}),[o,r,C,m,_,k,h,x,S,E,z,$]);e.useImperativeHandle(c,()=>({...N,element:se.current}),[N,se]);const O=e.useCallback(j=>{$t({height:j.height,width:j.width}),V==null||V(j)},[V]),q=e.useMemo(()=>({enabled:w,handles:["SouthEast"],onResize:O}),[w,O]),{renderResizeHandles:ne}=Un(Ue,q);e.useEffect(()=>{const j=K==null?void 0:K.zIndex;let W=typeof j=="number"&&Number.isFinite(j)?j:1e3;if(W===1e3&&ct.current){const le=Number(Wn(ct.current));Number.isFinite(le)&&(W=le)}Ht(Math.max(3,W+1))},[K==null?void 0:K.zIndex,ct]);const{isInputValid:De}=xr({dropdownValue:ze,inputElementRef:se,required:S,valid:we,validationMessage:H}),Z=e.useMemo(()=>({text:i==null?void 0:i.text,value:(i==null?void 0:i.value)??"value",disabled:(i==null?void 0:i.disabled)??"disabled",groupBy:i==null?void 0:i.groupBy,htmlAttributes:i==null?void 0:i.htmlAttributes}),[i==null?void 0:i.text,i==null?void 0:i.value,i==null?void 0:i.groupBy,i==null?void 0:i.disabled,i==null?void 0:i.htmlAttributes]),Q=e.useMemo(()=>({position:{X:"left",Y:"bottom"},collision:Ae==="rtl"?{X:Et.Fit,Y:Et.Flip}:{X:Et.Flip,Y:Et.Flip},autoReposition:!0,width:"100%",height:"300px",...K}),[K,Ae]),{showPopup:Se,hidePopup:Y,setPopupWidth:qe,setPopupHeight:be,popupClassNames:Ve}=Fr({isPopupOpen:ce,open:R,setIsPopupOpen:it,setIsSpanFocused:de,spanElementRef:ct,inputElementRef:se,popupRef:Ue,onOpen:ee,onClose:ye,popupWidth:Q.width,popupHeight:Q.height,className:_}),ut=e.useMemo(()=>{if(J)return{...J,scrollMode:J.scrollMode??Ct.FetchAll}},[J]),rt=e.useMemo(()=>{const j=He.current?He.current:t;if(!Array.isArray(j)||j.length===0)return[];const W=j.filter(fe=>fe!=null);return W.length===0?[]:pn(W,Z,a,l??new Ce).map(fe=>{const pe=Z.disabled&&typeof fe=="object"&&ae(Z.disabled,fe)===!0,me=typeof fe=="object"&&!!ae("isHeader",fe);return{item:fe,isDisabled:!!pe,isHeader:me}})},[He.current,t,Z,a,l]),bt=e.useCallback(async()=>{if(!ve||Ye.current)return null;const j=t;try{he(!0),xe==null||xe({data:j,query:l??new Ce});const W=await j.executeQuery(l??new Ce),le=Array.isArray(W==null?void 0:W.result)?W.result:[];return Ye.current=!0,ke==null||ke({data:le}),he(!1),le}catch(W){return he(!1),Je==null||Je(W),null}},[ve,t,l,he,xe,ke,Je]),Bt=e.useCallback(async()=>{const j=await bt();if(Array.isArray(j)){const W=j.filter(le=>le!=null);return He.current=W,W}return null},[bt]);Lr({value:o,defaultValue:r,dataSource:t,dataSourceListItems:rt,fields:Z,isValueControlled:o!==void 0,allowObjectBinding:p,dropdownbaseRef:te,dropdownValue:ze,setDropdownValue:Oe,setTextValue:Me,setActiveIndex:Be,setItemData:Pe,prefetchData:Bt});const{keyActionHandler:Dt,handleCustomTypeAhead:_t,typeAheadMatchedItem:Ft,setTypeAheadMatchedItem:Kt}=Ar({isInteractive:!m&&!M,skipDisabledItems:ue,activeIndex:at,onChange:Le,setActiveIndex:Be,isRemoteData:ve,dataSourceListItems:rt,fields:Z,dropdownbaseRef:te,setTextValue:Me,showPopup:Se,hidePopup:Y,setIsSpanFocused:de,setDropdownValue:Oe,prefetchData:Bt,currentItemData:Ee,setItemData:Pe,onScroll:Ie,virtualization:ut,filterable:re}),Lt=e.useCallback(j=>{var st,ht,jt,We,Vt;const W=se.current?se.current.value:Re??"";if(!W)return;const le=(ht=(st=te==null?void 0:te.current)==null?void 0:st.getFilteredListData)==null?void 0:ht.call(st),fe=Array.isArray(le)&&le.length>0?le:(rt==null?void 0:rt.map(_e=>_e.item))??[],pe=fe.find(_e=>String(Ne(_e,"text",Z))===W);let me=null,$e=null,et=null,Ge="";pe&&(me=Ne(pe,"value",Z),$e=pe,et=mn(pe,fe,Z),Ge=String(Ne(pe,"text",Z)),Kt(null)),!pe&&d&&(me=$e=Ge=W),!pe&&!d&&(me=$e=null),Oe(me),Pe($e),Be(et),Me(Ge),!(!pe&&!d)&&(d&&(Qe==null||Qe(Ge)),Le&&Le({event:j,previousItemData:Ee,value:me,itemData:$e}),ce&&(Y==null||Y()),f&&((Vt=se.current)==null||Vt.setSelectionRange((jt=se.current)==null?void 0:jt.value.length,(We=se.current)==null?void 0:We.value.length)))},[d,se,Re,te,rt,Z,Oe,f,Pe,Be,Me,Qe,Le,Ee,Y,ce,Kt]);e.useEffect(()=>{R===void 0&&y&&(de(!0),Se==null||Se())},[]),e.useEffect(()=>{X&&ce&&re&&te.current&&requestAnimationFrame(()=>{de(!1)})},[ce,re,X]),e.useEffect(()=>{var j;R!==void 0&&(it(R),de(R),R&&((j=se.current)==null||j.focus()))},[R,se,it,de]),e.useEffect(()=>{St.current===null&&(St.current=JSON.stringify(s.dataSource)??null),gt.current===null&&(gt.current=JSON.stringify(s.fields)??null)},[]),e.useEffect(()=>{(JSON.stringify(s.dataSource)!==St.current||JSON.stringify(s.fields)!==gt.current)&&(St.current=JSON.stringify(s.dataSource)??null,gt.current=JSON.stringify(s.fields)??null,He.current=null,Ye!=null&&Ye.current&&(Ye.current=!1,Bt()),he(!1))},[s.dataSource,s.fields]),e.useEffect(()=>{X&&ve&&ce&&!Ye.current&&he(!0)},[ve,ce,X,he]);const Sn=e.useCallback(j=>{X||j.button===2||m||M||(de(!ce),j.preventDefault(),ve&&ce&&he(!1),ce?Y(j):Se(j))},[m,ce,ve,M,X,de,he,Y,Se]),bn=e.useCallback(j=>{var pe;const W=j.target.value;if(Me(W),X)return;const le=j.nativeEvent,fe=!!(le&&le.inputType&&le.inputType.toLowerCase().includes("delete"));if(fe&&(Pe(null),Oe(null),Be(null)),ce||Se(j.nativeEvent),re)(pe=te.current)==null||pe.filter([],void 0,void 0,j),f&&!fe&&requestAnimationFrame(()=>{var $e,et;const me=(et=($e=te==null?void 0:te.current)==null?void 0:$e.getFilteredListData)==null?void 0:et.call($e);if(se.current&&me&&(me==null?void 0:me.length)>0){const Ge=String(Ne(me[0],"text",Z));Me(Ge),requestAnimationFrame(()=>{if(se.current){const st=W.length,ht=Ge.length;se.current.setSelectionRange(st,ht)}})}});else if(!fe){const me=_t(W);f&&me&&(Me(me),requestAnimationFrame(()=>{if(se.current){const $e=W.length,et=me.length;se.current.setSelectionRange($e,et)}}))}},[Me,te,X,re,_t,ce,f,se,Z]),vn=e.useCallback(()=>{var j,W;if(de(!0),X){const le=(j=se.current)==null?void 0:j.value.length;le&&((W=se.current)==null||W.setSelectionRange(le,le))}},[de,X,se]),Cn=e.useCallback(j=>{var fe,pe,me;if(m)return;const W=j.relatedTarget,le=!!(W&&(Ue!=null&&Ue.current)&&((pe=(fe=Ue==null?void 0:Ue.current)==null?void 0:fe.element)!=null&&pe.contains(W)));!X&&!le&&Lt(j),(me=se.current)!=null&&me.contains(W)||de(!1)},[m,se,de,Lt,X,Ue]),kn=e.useCallback(j=>{var W;j.preventDefault(),j.stopPropagation(),Me(""),Oe(null),Be(null),Pe(null),!X&&re&&((W=te.current)==null||W.filter([],void 0,void 0,void 0,j)),Le&&Le({event:j,previousItemData:Ee,value:null,itemData:null})},[Le,Ee,Me,Oe,Be,Pe]),In=e.useCallback(j=>{if(!X){if(j.key==="Enter"&&Re&&!Ee&&!Ft){Lt(j),j.preventDefault(),j.stopPropagation();return}if(j.key.length===1&&!j.ctrlKey&&!j.metaKey&&!j.altKey&&!re)return}Dt(j)},[Dt,re,X,Lt,Re,Ee,Ft]),Jt=e.useCallback(j=>{var fe,pe,me,$e,et,Ge,st,ht;const le=j.target.closest(".sf-list-item");if(le){const jt=(fe=le.dataset)==null?void 0:fe.value;if(!oe(jt)){const We=(me=(pe=te==null?void 0:te.current)==null?void 0:pe.getFormattedValue)==null?void 0:me.call(pe,jt),Vt=(($e=te==null?void 0:te.current)==null?void 0:$e.getTextByValue(We))||"";Me==null||Me(Vt),We!==void 0&&(Oe==null||Oe(We));const _e=(et=te==null?void 0:te.current)==null?void 0:et.getDataByValue(We),tn=(st=(Ge=te==null?void 0:te.current)==null?void 0:Ge.getFilteredListData)==null?void 0:st.call(Ge);if(tn){const nn=tn.findIndex(Vn=>String(Ne(Vn,"value",Z))===String(We??""));nn>=0&&(Be==null||Be(nn))}let Rt=We;_e!=null&&Mt(_e)?(Pe(_e),Oe(_e),Rt=_e):(Pe(_e),We!=null&&(Oe(We),Rt=We)),Le&&Rt!==void 0&&Le({event:j,previousItemData:Ee,value:Rt,itemData:_e||null})}Y==null||Y(),(ht=se==null?void 0:se.current)==null||ht.focus()}},[Y,Me,Oe,te,se,Z,Be,Pe,Ee,Le]),Qt=e.useCallback(j=>{X||he(!0),xe==null||xe(j)},[he,xe,X]),Yt=e.useCallback((j,W)=>{if(ke==null||ke(j),he(!1),!W){if(Array.isArray(j.data)){const le=j.data.filter(fe=>fe!=null);He.current=le}else He.current=null;if(Ye.current=!0,te.current&&ze!==null&&ze!==void 0&&te.current.getDataByValue(ze)!==void 0){const fe=te.current.getTextByValue(ze);Me(fe)}}},[ke,he,te,ze,Me]),Gt=e.useCallback(j=>{he(!1),Je==null||Je(j)},[he,Je]),At=e.useMemo(()=>!!$&&!ce||xt,[xt,ce,$]),wn=e.useMemo(()=>{const j=cn(String(dt),{placeholder:C},ot);return j.setLocale(ot),j.getConstant("placeholder")||C||""},[ot,C,dt]),jn=e.useMemo(()=>["sf-input-group sf-control sf-dropdown",Ze,At?"sf-loading":"",m?"sf-disabled":"",Ae==="rtl"?"sf-rtl":"",M?"sf-readonly":"",k!=="Never"?_n.FLOATINPUT:"",h===tt.Small?"sf-small":h===tt.Large?"sf-large":"sf-medium",!De&&G?"sf-error":"",x&&x.toLowerCase()!=="standard"?x.toLowerCase()==="outlined"?"sf-outline":`sf-${x.toLowerCase()}`:"",lt?"sf-input-focus":"",_].filter(Boolean).join(" "),[m,_,Ae,M,k,h,x,lt,De,G,At,Ze]),Xt=e.useMemo(()=>[Ae==="rtl"?"sf-rtl":"",De?"sf-valid-input":"",kt,I?"sf-input-value-template":""].filter(Boolean).join(" "),[Ae,De,kt,I]),Mn=e.useMemo(()=>[Ve,w?"sf-dropdown-resizable":""].filter(Boolean).join(" "),[Ve]),Nn=e.useMemo(()=>{const{className:j,...W}=E||{},le=[j,Xt].filter(Boolean).join(" ");return{...W,id:n,className:le,readOnly:X||M,required:S,disabled:m,value:Re,defaultValue:void 0}},[E,Re,Xt,n,M,S,m,X]),Tn=e.useMemo(()=>["sf-input-icon sf-ddl-icon",ce?"sf-icon-rotate":"sf-icon-normal"].filter(Boolean).join(" "),[ce]),Dn=e.useMemo(()=>({"aria-controls":`${n}_listbox`,"aria-activedescendant":ce&&at!=null?`${n}_option_${at}`:void 0,"aria-expanded":R??ce}),[at,n,R,ce]),Zt=e.useCallback(j=>{const W=String(Ne(j,"text",Z)),le=Sr(W,Re);return g.jsx("span",{className:"sf-dd-item",children:le.map((fe,pe)=>fe.highlight?g.jsx("span",{className:"sf-dd-highlight",children:fe.text},pe):g.jsx("span",{children:fe.text},pe))})},[Z,Re,Fe,B,ie]),en=e.useMemo(()=>v?D??Zt:D,[v,D,Zt]),Fn=e.useCallback(j=>{if(!X||j.button===2||m)return;const W=j.target instanceof Element?j.target:null;W&&W.parentElement&&W.parentElement.matches(".sf-clear-icon")||(de(!ce),j.preventDefault(),xt&&!ve&&!$&&he(!1),M||(ce?Y(j):Se(j)),ve&&ce&&he(!1))},[he,m,M,ce,ve,X,de]),Ln=e.useCallback(()=>g.jsx(Rr,{valueTemplate:je,dropdownValue:ze,dataSource:Array.isArray(t)?t:[],fields:Z,allowObjectBinding:p,onRenderedChange:u}),[je,ze,t,Z,p]),An=e.useMemo(()=>g.jsx(yn,{id:n,ref:te,dataSource:t,itemData:Ee,fields:Z,query:l,size:h,sortOrder:a,allowObjectBinding:p,onItemClick:Jt,itemTemplate:en,headerTemplate:F,footerTemplate:T,groupTemplate:b,noRecordsTemplate:A,value:ze,onErrorTemplate:P,onError:Gt,onDataRequest:Qt,onDataLoad:Yt,activeIndex:at,remoteCacheRef:He,virtualization:ut,onScroll:Ie,onFilter:ge,externalFilterInputRef:X?void 0:se,ignoreAccent:ie,ignoreCase:B,filterType:Fe,debounceDelay:Te,focusedItem:Ft,resizable:w,onResize:V,isDropdownFiltering:re,filterPlaceholder:L,keyActionHandler:X?Dt:void 0},"dropdown"),[te,t,Z,l,h,a,Jt,en,F,T,b,A,ze,Gt,P,Qt,Yt,n,at,He,Ie,Ee,p,se,ie,B,Fe,Te,Ft,ge,V,w,re,L,X,Dt,ut]);return g.jsxs(g.Fragment,{children:[g.jsxs("span",{ref:ct,className:jn,tabIndex:-1,onKeyDown:In,onMouseDown:Fn,...nt,children:[je&&g.jsx("span",{className:`sf-input-value ${I?"sf-content":"sf-display-none"}`,children:Ln()}),g.jsx(un,{id:n,ref:se,type:"text",role:"combobox","aria-haspopup":"listbox","aria-label":mt,"aria-autocomplete":"list","aria-disabled":m,"aria-readonly":M,placeholder:wn,floatLabelType:k,required:S,onChange:bn,onFocus:vn,onBlur:Cn,...Dn,...Nn}),k!=="Never"&&Kn(k,lt,Re||"",C,n),z&&fn(Re&&(lt||ce)?Re:"",kn),!At&&g.jsxs("span",{onMouseDown:Sn,"aria-hidden":"true",className:Tn,children:[" ",U," "]}),At&&g.jsx(Ut,{size:h===tt.Small?"16px":"20px",visible:!0})]}),ce&&typeof document<"u"&&Rn.createPortal(g.jsxs(Jn,{ref:Ue,className:Mn,id:`${n}_popup`,relateTo:ct.current,width:pt.width?pt.width:qe(),height:"auto",position:Q.position,zIndex:wt,collision:Q.collision,open:ce,autoReposition:Q.autoReposition,animation:{show:{name:"FadeIn",duration:100},hide:{name:"FadeOut",duration:100}},offsetX:Q.offsetX,offsetY:Q.offsetY,style:{maxHeight:pt.height?pt.height:be()},children:[An,w&&ne(g.jsx(Qn,{fill:"currentColor"}))]}),document.body)]})});e.memo(xn);const Er=e.forwardRef((s,c)=>{const{dataSource:n,query:t,fields:i,value:o,placeholder:r="",id:C=`dropdownlist_${e.useId()}`,disabled:m=!1,readOnly:M=!1,popupSettings:k={},allowObjectBinding:h=!1,labelMode:x,open:_,defaultOpen:S,skipDisabledItems:E,defaultValue:z,ignoreCase:U=!0,ignoreAccent:$=!1,filterable:K=!1,filterType:R="StartsWith",filterPlaceholder:y="",debounceDelay:l=0,sortOrder:a,loading:p=!1,size:d,variant:D,inputProps:F={},itemTemplate:T,headerTemplate:b,footerTemplate:A,groupTemplate:P,valueTemplate:J,noRecordsTemplate:B,clearButton:ie=!1,dropdownIcon:re,valid:Fe,validationMessage:Te="",validityStyles:we=!0,required:H,className:G,virtualization:ue,onChange:f,onOpen:v,onClose:w,onError:L,onFilter:V,onDataRequest:ee,onDataLoad:ye,onScroll:xe,onErrorTemplate:ke,...Je}=s;e.useEffect(()=>{ln("dropdownlist")},[]);const Ie=e.useRef(null),Le=e.useMemo(()=>({dataSource:n,query:t,fields:i,value:o,placeholder:r,id:C,popupSettings:k,allowObjectBinding:h,itemTemplate:T,headerTemplate:b,valueTemplate:J,groupTemplate:P,noRecordsTemplate:B,footerTemplate:A,labelMode:x,open:_,skipDisabledItems:E,ignoreCase:U,ignoreAccent:$,filterable:K,filterType:R,filterPlaceholder:y,sortOrder:a,clearButton:ie,dropdownIcon:re,loading:p,size:d,variant:D}),[n,i,o,r,C,k,h]);return e.useImperativeHandle(c,()=>{var ge;return{...Le,element:(ge=Ie.current)==null?void 0:ge.element}},[Le,Ie]),g.jsx(xn,{...Je,id:C,ref:Ie,componentClassName:"sf-ddl",spanClickable:!0,inputClassName:"sf-dropdown-list",localeComponentName:"dropdownList",ariaLabel:"dropdownlist",dataSource:n,query:t,fields:i,value:o,placeholder:r,disabled:m,readOnly:M,popupSettings:k,allowObjectBinding:h,labelMode:x,open:_,defaultOpen:S,skipDisabledItems:E,defaultValue:z,ignoreCase:U,ignoreAccent:$,filterable:K,filterType:R,filterPlaceholder:y,debounceDelay:l,sortOrder:a,loading:p,size:d,variant:D,inputProps:F,itemTemplate:T,headerTemplate:b,footerTemplate:A,groupTemplate:P,valueTemplate:J,noRecordsTemplate:B,clearButton:ie,dropdownIcon:re,valid:Fe,validationMessage:Te,validityStyles:we,required:H,className:G,virtualization:ue,onChange:f,onOpen:v,onClose:w,onError:L,onFilter:V,onDataRequest:ee,onDataLoad:ye,onScroll:xe,onErrorTemplate:ke})});e.memo(Er);export{Er as D};
